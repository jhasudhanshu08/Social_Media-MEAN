{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { mimeType } from './mime-type.validator';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../posts.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/progress-spinner\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/button\";\n\nfunction PostCreateComponent_mat_spinner_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nfunction PostCreateComponent_form_2_mat_error_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Please enter the title !!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostCreateComponent_form_2_mat_error_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Please enter the IsActive !!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostCreateComponent_form_2_mat_error_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Please enter the content !!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostCreateComponent_form_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 2);\n    i0.ɵɵlistener(\"submit\", function PostCreateComponent_form_2_Template_form_submit_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onSavePost();\n    });\n    i0.ɵɵelementStart(1, \"mat-form-field\");\n    i0.ɵɵelement(2, \"input\", 3);\n    i0.ɵɵtemplate(3, PostCreateComponent_form_2_mat_error_3_Template, 2, 0, \"mat-error\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-form-field\");\n    i0.ɵɵelement(5, \"input\", 4);\n    i0.ɵɵtemplate(6, PostCreateComponent_form_2_mat_error_6_Template, 2, 0, \"mat-error\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mat-form-field\");\n    i0.ɵɵelement(8, \"textarea\", 5);\n    i0.ɵɵtemplate(9, PostCreateComponent_form_2_mat_error_9_Template, 2, 0, \"mat-error\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"br\")(11, \"br\")(12, \"hr\")(13, \"br\");\n    i0.ɵɵelementStart(14, \"button\", 6);\n    i0.ɵɵtext(15, \"Submit\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"title\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"isActive\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"content\"));\n  }\n}\n\nexport class PostCreateComponent {\n  constructor(postsService, route) {\n    this.postsService = postsService;\n    this.route = route;\n    this.enteredTitle = '';\n    this.enteredContent = '';\n    this.isLoading = false;\n    this.mode = 'create';\n  }\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      title: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n      content: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n      image: new FormControl(null, {\n        validators: [Validators.required],\n        asyncValidators: [mimeType]\n      })\n    });\n    this.route.paramMap.subscribe(paramMap => {\n      if (paramMap.has('postId')) {\n        this.mode = 'edit';\n        this.postId = paramMap.get('postId');\n        this.isLoading = true;\n        this.postsService.getPost(this.postId).subscribe(postData => {\n          this.isLoading = false;\n          this.post = {\n            id: postData._id,\n            title: postData.title,\n            content: postData.content\n          };\n          this.form.setValue({\n            title: this.post.title,\n            content: this.post.content\n          });\n        });\n      } else {\n        this.mode = 'create';\n        this.postId = null;\n      }\n    });\n  } // onImagePicked(event: Event) {\n  //   const file: any = (event.target as HTMLInputElement).files![0];\n  //   this.form.patchValue({ image: file });\n  //   this.form.get('image')?.updateValueAndValidity();\n  //   const reader = new FileReader();\n  //   reader.onload = () => {\n  //     this.imagePreview = reader.result as string;\n  //   };\n  //   reader.readAsDataURL(file);\n  // }\n\n\n  onSavePost() {\n    if (this.form.invalid) return;\n    this.isLoading = true;\n\n    if (this.mode === 'create') {\n      this.postsService.addPost(this.form.value.title, this.form.value.content, this.form.value.image);\n    } else {\n      this.postsService.updatePost(this.postId, this.form.value.title, this.form.value.content, this.form.value.imagePath);\n    }\n\n    this.form.reset();\n  }\n\n}\n\nPostCreateComponent.ɵfac = function PostCreateComponent_Factory(t) {\n  return new (t || PostCreateComponent)(i0.ɵɵdirectiveInject(i1.PostsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\n\nPostCreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostCreateComponent,\n  selectors: [[\"app-post-create\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [3, \"formGroup\", \"submit\", 4, \"ngIf\"], [3, \"formGroup\", \"submit\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"title\", \"placeholder\", \"Device Id\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"isActive\", \"placeholder\", \"IsActive\"], [\"matInput\", \"\", \"rows\", \"4\", \"formControlName\", \"content\", \"placeholder\", \"Content\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", \"type\", \"submit\"]],\n  template: function PostCreateComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-card\");\n      i0.ɵɵtemplate(1, PostCreateComponent_mat_spinner_1_Template, 1, 0, \"mat-spinner\", 0);\n      i0.ɵɵtemplate(2, PostCreateComponent_form_2_Template, 16, 4, \"form\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n    }\n  },\n  directives: [i3.MatCard, i4.NgIf, i5.MatProgressSpinner, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i7.MatFormField, i8.MatInput, i6.DefaultValueAccessor, i6.NgControlStatus, i6.FormControlName, i7.MatError, i9.MatButton],\n  styles: [\"mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\nmat-spinner[_ngcontent-%COMP%] {\\r\\n    margin: auto;\\r\\n}\\r\\n\\r\\ninput[type=\\\"file\\\"][_ngcontent-%COMP%] {\\r\\n    visibility: hidden;\\r\\n}\\r\\n\\r\\n.image-preview[_ngcontent-%COMP%] {\\r\\n    height: 5rem;\\r\\n    margin: 1rem 0;\\r\\n}\\r\\n\\r\\n.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n    height: 170%;\\r\\n    width: 15%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QtY3JlYXRlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGNBQWM7QUFDbEI7O0FBRUE7SUFDSSxZQUFZO0lBQ1osVUFBVTtBQUNkIiwiZmlsZSI6InBvc3QtY3JlYXRlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJtYXQtZm9ybS1maWVsZCwgdGV4dGFyZWEge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbm1hdC1zcGlubmVyIHtcclxuICAgIG1hcmdpbjogYXV0bztcclxufVxyXG5cclxuaW5wdXRbdHlwZT1cImZpbGVcIl0ge1xyXG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG59XHJcblxyXG4uaW1hZ2UtcHJldmlldyB7XHJcbiAgICBoZWlnaHQ6IDVyZW07XHJcbiAgICBtYXJnaW46IDFyZW0gMDtcclxufVxyXG5cclxuLmltYWdlLXByZXZpZXcgaW1nIHtcclxuICAgIGhlaWdodDogMTcwJTtcclxuICAgIHdpZHRoOiAxNSU7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["C:/Users/jhasu/OneDrive/Desktop/Angular (7)/MEAN/MEAN/src/app/posts/post-create/post-create.component.ts"],"names":["FormControl","FormGroup","Validators","mimeType","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","PostCreateComponent_mat_spinner_1_Template","rf","ctx","ɵɵelement","PostCreateComponent_form_2_mat_error_3_Template","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","PostCreateComponent_form_2_mat_error_6_Template","PostCreateComponent_form_2_mat_error_9_Template","PostCreateComponent_form_2_Template","_r6","ɵɵgetCurrentView","ɵɵlistener","PostCreateComponent_form_2_Template_form_submit_0_listener","ɵɵrestoreView","ctx_r5","ɵɵnextContext","onSavePost","ɵɵtemplate","ctx_r1","ɵɵproperty","form","ɵɵadvance","get","PostCreateComponent","constructor","postsService","route","enteredTitle","enteredContent","isLoading","mode","ngOnInit","title","validators","required","content","image","asyncValidators","paramMap","subscribe","has","postId","getPost","postData","post","id","_id","setValue","invalid","addPost","value","updatePost","imagePath","reset","ɵfac","PostCreateComponent_Factory","t","ɵɵdirectiveInject","PostsService","ActivatedRoute","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","PostCreateComponent_Template","directives","MatCard","NgIf","MatProgressSpinner","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","MatFormField","MatInput","DefaultValueAccessor","NgControlStatus","FormControlName","MatError","MatButton","styles"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,UAAjC,QAAmD,gBAAnD;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,kBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,wBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,oCAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,8BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,yBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,0BAApB;;AACA,SAASC,0CAAT,CAAoDC,EAApD,EAAwDC,GAAxD,EAA6D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACvEX,IAAAA,EAAE,CAACa,SAAH,CAAa,CAAb,EAAgB,aAAhB;AACH;AAAE;;AACH,SAASC,+CAAT,CAAyDH,EAAzD,EAA6DC,GAA7D,EAAkE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC5EX,IAAAA,EAAE,CAACe,cAAH,CAAkB,CAAlB,EAAqB,WAArB;AACAf,IAAAA,EAAE,CAACgB,MAAH,CAAU,CAAV,EAAa,2BAAb;AACAhB,IAAAA,EAAE,CAACiB,YAAH;AACH;AAAE;;AACH,SAASC,+CAAT,CAAyDP,EAAzD,EAA6DC,GAA7D,EAAkE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC5EX,IAAAA,EAAE,CAACe,cAAH,CAAkB,CAAlB,EAAqB,WAArB;AACAf,IAAAA,EAAE,CAACgB,MAAH,CAAU,CAAV,EAAa,8BAAb;AACAhB,IAAAA,EAAE,CAACiB,YAAH;AACH;AAAE;;AACH,SAASE,+CAAT,CAAyDR,EAAzD,EAA6DC,GAA7D,EAAkE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC5EX,IAAAA,EAAE,CAACe,cAAH,CAAkB,CAAlB,EAAqB,WAArB;AACAf,IAAAA,EAAE,CAACgB,MAAH,CAAU,CAAV,EAAa,6BAAb;AACAhB,IAAAA,EAAE,CAACiB,YAAH;AACH;AAAE;;AACH,SAASG,mCAAT,CAA6CT,EAA7C,EAAiDC,GAAjD,EAAsD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAChE,UAAMU,GAAG,GAAGrB,EAAE,CAACsB,gBAAH,EAAZ;;AACAtB,IAAAA,EAAE,CAACe,cAAH,CAAkB,CAAlB,EAAqB,MAArB,EAA6B,CAA7B;AACAf,IAAAA,EAAE,CAACuB,UAAH,CAAc,QAAd,EAAwB,SAASC,0DAAT,GAAsE;AAAExB,MAAAA,EAAE,CAACyB,aAAH,CAAiBJ,GAAjB;AAAuB,YAAMK,MAAM,GAAG1B,EAAE,CAAC2B,aAAH,EAAf;AAAmC,aAAOD,MAAM,CAACE,UAAP,EAAP;AAA6B,KAAvL;AACA5B,IAAAA,EAAE,CAACe,cAAH,CAAkB,CAAlB,EAAqB,gBAArB;AACAf,IAAAA,EAAE,CAACa,SAAH,CAAa,CAAb,EAAgB,OAAhB,EAAyB,CAAzB;AACAb,IAAAA,EAAE,CAAC6B,UAAH,CAAc,CAAd,EAAiBf,+CAAjB,EAAkE,CAAlE,EAAqE,CAArE,EAAwE,WAAxE,EAAqF,CAArF;AACAd,IAAAA,EAAE,CAACiB,YAAH;AACAjB,IAAAA,EAAE,CAACe,cAAH,CAAkB,CAAlB,EAAqB,gBAArB;AACAf,IAAAA,EAAE,CAACa,SAAH,CAAa,CAAb,EAAgB,OAAhB,EAAyB,CAAzB;AACAb,IAAAA,EAAE,CAAC6B,UAAH,CAAc,CAAd,EAAiBX,+CAAjB,EAAkE,CAAlE,EAAqE,CAArE,EAAwE,WAAxE,EAAqF,CAArF;AACAlB,IAAAA,EAAE,CAACiB,YAAH;AACAjB,IAAAA,EAAE,CAACe,cAAH,CAAkB,CAAlB,EAAqB,gBAArB;AACAf,IAAAA,EAAE,CAACa,SAAH,CAAa,CAAb,EAAgB,UAAhB,EAA4B,CAA5B;AACAb,IAAAA,EAAE,CAAC6B,UAAH,CAAc,CAAd,EAAiBV,+CAAjB,EAAkE,CAAlE,EAAqE,CAArE,EAAwE,WAAxE,EAAqF,CAArF;AACAnB,IAAAA,EAAE,CAACiB,YAAH;AACAjB,IAAAA,EAAE,CAACa,SAAH,CAAa,EAAb,EAAiB,IAAjB,EAAuB,EAAvB,EAA2B,IAA3B,EAAiC,EAAjC,EAAqC,IAArC,EAA2C,EAA3C,EAA+C,IAA/C;AACAb,IAAAA,EAAE,CAACe,cAAH,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,CAAhC;AACAf,IAAAA,EAAE,CAACgB,MAAH,CAAU,EAAV,EAAc,QAAd;AACAhB,IAAAA,EAAE,CAACiB,YAAH;AACH;;AAAC,MAAIN,EAAE,GAAG,CAAT,EAAY;AACV,UAAMmB,MAAM,GAAG9B,EAAE,CAAC2B,aAAH,EAAf;AACA3B,IAAAA,EAAE,CAAC+B,UAAH,CAAc,WAAd,EAA2BD,MAAM,CAACE,IAAlC;AACAhC,IAAAA,EAAE,CAACiC,SAAH,CAAa,CAAb;AACAjC,IAAAA,EAAE,CAAC+B,UAAH,CAAc,MAAd,EAAsBD,MAAM,CAACE,IAAP,CAAYE,GAAZ,CAAgB,OAAhB,CAAtB;AACAlC,IAAAA,EAAE,CAACiC,SAAH,CAAa,CAAb;AACAjC,IAAAA,EAAE,CAAC+B,UAAH,CAAc,MAAd,EAAsBD,MAAM,CAACE,IAAP,CAAYE,GAAZ,CAAgB,UAAhB,CAAtB;AACAlC,IAAAA,EAAE,CAACiC,SAAH,CAAa,CAAb;AACAjC,IAAAA,EAAE,CAAC+B,UAAH,CAAc,MAAd,EAAsBD,MAAM,CAACE,IAAP,CAAYE,GAAZ,CAAgB,SAAhB,CAAtB;AACH;AAAE;;AACH,OAAO,MAAMC,mBAAN,CAA0B;AAC7BC,EAAAA,WAAW,CAACC,YAAD,EAAeC,KAAf,EAAsB;AAC7B,SAAKD,YAAL,GAAoBA,YAApB;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKC,cAAL,GAAsB,EAAtB;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,IAAL,GAAY,QAAZ;AACH;;AACDC,EAAAA,QAAQ,GAAG;AACP,SAAKX,IAAL,GAAY,IAAInC,SAAJ,CAAc;AACtB+C,MAAAA,KAAK,EAAE,IAAIhD,WAAJ,CAAgB,IAAhB,EAAsB;AAAEiD,QAAAA,UAAU,EAAE,CAAC/C,UAAU,CAACgD,QAAZ;AAAd,OAAtB,CADe;AAEtBC,MAAAA,OAAO,EAAE,IAAInD,WAAJ,CAAgB,IAAhB,EAAsB;AAAEiD,QAAAA,UAAU,EAAE,CAAC/C,UAAU,CAACgD,QAAZ;AAAd,OAAtB,CAFa;AAGtBE,MAAAA,KAAK,EAAE,IAAIpD,WAAJ,CAAgB,IAAhB,EAAsB;AACzBiD,QAAAA,UAAU,EAAE,CAAC/C,UAAU,CAACgD,QAAZ,CADa;AAEzBG,QAAAA,eAAe,EAAE,CAAClD,QAAD;AAFQ,OAAtB;AAHe,KAAd,CAAZ;AAQA,SAAKuC,KAAL,CAAWY,QAAX,CAAoBC,SAApB,CAA+BD,QAAD,IAAc;AACxC,UAAIA,QAAQ,CAACE,GAAT,CAAa,QAAb,CAAJ,EAA4B;AACxB,aAAKV,IAAL,GAAY,MAAZ;AACA,aAAKW,MAAL,GAAcH,QAAQ,CAAChB,GAAT,CAAa,QAAb,CAAd;AACA,aAAKO,SAAL,GAAiB,IAAjB;AACA,aAAKJ,YAAL,CAAkBiB,OAAlB,CAA0B,KAAKD,MAA/B,EAAuCF,SAAvC,CAAkDI,QAAD,IAAc;AAC3D,eAAKd,SAAL,GAAiB,KAAjB;AACA,eAAKe,IAAL,GAAY;AACRC,YAAAA,EAAE,EAAEF,QAAQ,CAACG,GADL;AAERd,YAAAA,KAAK,EAAEW,QAAQ,CAACX,KAFR;AAGRG,YAAAA,OAAO,EAAEQ,QAAQ,CAACR;AAHV,WAAZ;AAKA,eAAKf,IAAL,CAAU2B,QAAV,CAAmB;AACff,YAAAA,KAAK,EAAE,KAAKY,IAAL,CAAUZ,KADF;AAEfG,YAAAA,OAAO,EAAE,KAAKS,IAAL,CAAUT;AAFJ,WAAnB;AAIH,SAXD;AAYH,OAhBD,MAiBK;AACD,aAAKL,IAAL,GAAY,QAAZ;AACA,aAAKW,MAAL,GAAc,IAAd;AACH;AACJ,KAtBD;AAuBH,GAzC4B,CA0C7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAzB,EAAAA,UAAU,GAAG;AACT,QAAI,KAAKI,IAAL,CAAU4B,OAAd,EACI;AACJ,SAAKnB,SAAL,GAAiB,IAAjB;;AACA,QAAI,KAAKC,IAAL,KAAc,QAAlB,EAA4B;AACxB,WAAKL,YAAL,CAAkBwB,OAAlB,CAA0B,KAAK7B,IAAL,CAAU8B,KAAV,CAAgBlB,KAA1C,EAAiD,KAAKZ,IAAL,CAAU8B,KAAV,CAAgBf,OAAjE,EAA0E,KAAKf,IAAL,CAAU8B,KAAV,CAAgBd,KAA1F;AACH,KAFD,MAGK;AACD,WAAKX,YAAL,CAAkB0B,UAAlB,CAA6B,KAAKV,MAAlC,EAA0C,KAAKrB,IAAL,CAAU8B,KAAV,CAAgBlB,KAA1D,EAAiE,KAAKZ,IAAL,CAAU8B,KAAV,CAAgBf,OAAjF,EAA0F,KAAKf,IAAL,CAAU8B,KAAV,CAAgBE,SAA1G;AACH;;AACD,SAAKhC,IAAL,CAAUiC,KAAV;AACH;;AA/D4B;;AAiEjC9B,mBAAmB,CAAC+B,IAApB,GAA2B,SAASC,2BAAT,CAAqCC,CAArC,EAAwC;AAAE,SAAO,KAAKA,CAAC,IAAIjC,mBAAV,EAA+BnC,EAAE,CAACqE,iBAAH,CAAqBpE,EAAE,CAACqE,YAAxB,CAA/B,EAAsEtE,EAAE,CAACqE,iBAAH,CAAqBnE,EAAE,CAACqE,cAAxB,CAAtE,CAAP;AAAwH,CAA7L;;AACApC,mBAAmB,CAACqC,IAApB,GAA2B,aAAcxE,EAAE,CAACyE,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAEvC,mBAAR;AAA6BwC,EAAAA,SAAS,EAAE,CAAC,CAAC,iBAAD,CAAD,CAAxC;AAA+DC,EAAAA,KAAK,EAAE,CAAtE;AAAyEC,EAAAA,IAAI,EAAE,CAA/E;AAAkFC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,MAAJ,CAAD,EAAc,CAAC,CAAD,EAAI,WAAJ,EAAiB,QAAjB,EAA2B,CAA3B,EAA8B,MAA9B,CAAd,EAAqD,CAAC,CAAD,EAAI,WAAJ,EAAiB,QAAjB,CAArD,EAAiF,CAAC,UAAD,EAAa,EAAb,EAAiB,MAAjB,EAAyB,MAAzB,EAAiC,iBAAjC,EAAoD,OAApD,EAA6D,aAA7D,EAA4E,WAA5E,CAAjF,EAA2K,CAAC,UAAD,EAAa,EAAb,EAAiB,MAAjB,EAAyB,MAAzB,EAAiC,iBAAjC,EAAoD,UAApD,EAAgE,aAAhE,EAA+E,UAA/E,CAA3K,EAAuQ,CAAC,UAAD,EAAa,EAAb,EAAiB,MAAjB,EAAyB,GAAzB,EAA8B,iBAA9B,EAAiD,SAAjD,EAA4D,aAA5D,EAA2E,SAA3E,CAAvQ,EAA8V,CAAC,mBAAD,EAAsB,EAAtB,EAA0B,OAA1B,EAAmC,MAAnC,EAA2C,MAA3C,EAAmD,QAAnD,CAA9V,CAA1F;AAAufC,EAAAA,QAAQ,EAAE,SAASC,4BAAT,CAAsCrE,EAAtC,EAA0CC,GAA1C,EAA+C;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACpnBX,MAAAA,EAAE,CAACe,cAAH,CAAkB,CAAlB,EAAqB,UAArB;AACAf,MAAAA,EAAE,CAAC6B,UAAH,CAAc,CAAd,EAAiBnB,0CAAjB,EAA6D,CAA7D,EAAgE,CAAhE,EAAmE,aAAnE,EAAkF,CAAlF;AACAV,MAAAA,EAAE,CAAC6B,UAAH,CAAc,CAAd,EAAiBT,mCAAjB,EAAsD,EAAtD,EAA0D,CAA1D,EAA6D,MAA7D,EAAqE,CAArE;AACApB,MAAAA,EAAE,CAACiB,YAAH;AACH;;AAAC,QAAIN,EAAE,GAAG,CAAT,EAAY;AACVX,MAAAA,EAAE,CAACiC,SAAH,CAAa,CAAb;AACAjC,MAAAA,EAAE,CAAC+B,UAAH,CAAc,MAAd,EAAsBnB,GAAG,CAAC6B,SAA1B;AACAzC,MAAAA,EAAE,CAACiC,SAAH,CAAa,CAAb;AACAjC,MAAAA,EAAE,CAAC+B,UAAH,CAAc,MAAd,EAAsB,CAACnB,GAAG,CAAC6B,SAA3B;AACH;AAAE,GAVuD;AAUrDwC,EAAAA,UAAU,EAAE,CAAC9E,EAAE,CAAC+E,OAAJ,EAAa9E,EAAE,CAAC+E,IAAhB,EAAsB9E,EAAE,CAAC+E,kBAAzB,EAA6C9E,EAAE,CAAC+E,aAAhD,EAA+D/E,EAAE,CAACgF,oBAAlE,EAAwFhF,EAAE,CAACiF,kBAA3F,EAA+GhF,EAAE,CAACiF,YAAlH,EAAgIhF,EAAE,CAACiF,QAAnI,EAA6InF,EAAE,CAACoF,oBAAhJ,EAAsKpF,EAAE,CAACqF,eAAzK,EAA0LrF,EAAE,CAACsF,eAA7L,EAA8MrF,EAAE,CAACsF,QAAjN,EAA2NpF,EAAE,CAACqF,SAA9N,CAVyC;AAUiMC,EAAAA,MAAM,EAAE,CAAC,0uCAAD;AAVzM,CAArB,CAAzC","sourcesContent":["import { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { mimeType } from './mime-type.validator';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../posts.service\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"@angular/material/card\";\r\nimport * as i4 from \"@angular/common\";\r\nimport * as i5 from \"@angular/material/progress-spinner\";\r\nimport * as i6 from \"@angular/forms\";\r\nimport * as i7 from \"@angular/material/form-field\";\r\nimport * as i8 from \"@angular/material/input\";\r\nimport * as i9 from \"@angular/material/button\";\r\nfunction PostCreateComponent_mat_spinner_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"mat-spinner\");\r\n} }\r\nfunction PostCreateComponent_form_2_mat_error_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-error\");\r\n    i0.ɵɵtext(1, \"Please enter the title !!\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction PostCreateComponent_form_2_mat_error_6_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-error\");\r\n    i0.ɵɵtext(1, \"Please enter the IsActive !!\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction PostCreateComponent_form_2_mat_error_9_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-error\");\r\n    i0.ɵɵtext(1, \"Please enter the content !!\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction PostCreateComponent_form_2_Template(rf, ctx) { if (rf & 1) {\r\n    const _r6 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"form\", 2);\r\n    i0.ɵɵlistener(\"submit\", function PostCreateComponent_form_2_Template_form_submit_0_listener() { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.onSavePost(); });\r\n    i0.ɵɵelementStart(1, \"mat-form-field\");\r\n    i0.ɵɵelement(2, \"input\", 3);\r\n    i0.ɵɵtemplate(3, PostCreateComponent_form_2_mat_error_3_Template, 2, 0, \"mat-error\", 0);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(4, \"mat-form-field\");\r\n    i0.ɵɵelement(5, \"input\", 4);\r\n    i0.ɵɵtemplate(6, PostCreateComponent_form_2_mat_error_6_Template, 2, 0, \"mat-error\", 0);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(7, \"mat-form-field\");\r\n    i0.ɵɵelement(8, \"textarea\", 5);\r\n    i0.ɵɵtemplate(9, PostCreateComponent_form_2_mat_error_9_Template, 2, 0, \"mat-error\", 0);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(10, \"br\")(11, \"br\")(12, \"hr\")(13, \"br\");\r\n    i0.ɵɵelementStart(14, \"button\", 6);\r\n    i0.ɵɵtext(15, \"Submit\");\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"title\"));\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"isActive\"));\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.form.get(\"content\"));\r\n} }\r\nexport class PostCreateComponent {\r\n    constructor(postsService, route) {\r\n        this.postsService = postsService;\r\n        this.route = route;\r\n        this.enteredTitle = '';\r\n        this.enteredContent = '';\r\n        this.isLoading = false;\r\n        this.mode = 'create';\r\n    }\r\n    ngOnInit() {\r\n        this.form = new FormGroup({\r\n            title: new FormControl(null, { validators: [Validators.required] }),\r\n            content: new FormControl(null, { validators: [Validators.required] }),\r\n            image: new FormControl(null, {\r\n                validators: [Validators.required],\r\n                asyncValidators: [mimeType],\r\n            }),\r\n        });\r\n        this.route.paramMap.subscribe((paramMap) => {\r\n            if (paramMap.has('postId')) {\r\n                this.mode = 'edit';\r\n                this.postId = paramMap.get('postId');\r\n                this.isLoading = true;\r\n                this.postsService.getPost(this.postId).subscribe((postData) => {\r\n                    this.isLoading = false;\r\n                    this.post = {\r\n                        id: postData._id,\r\n                        title: postData.title,\r\n                        content: postData.content,\r\n                    };\r\n                    this.form.setValue({\r\n                        title: this.post.title,\r\n                        content: this.post.content,\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                this.mode = 'create';\r\n                this.postId = null;\r\n            }\r\n        });\r\n    }\r\n    // onImagePicked(event: Event) {\r\n    //   const file: any = (event.target as HTMLInputElement).files![0];\r\n    //   this.form.patchValue({ image: file });\r\n    //   this.form.get('image')?.updateValueAndValidity();\r\n    //   const reader = new FileReader();\r\n    //   reader.onload = () => {\r\n    //     this.imagePreview = reader.result as string;\r\n    //   };\r\n    //   reader.readAsDataURL(file);\r\n    // }\r\n    onSavePost() {\r\n        if (this.form.invalid)\r\n            return;\r\n        this.isLoading = true;\r\n        if (this.mode === 'create') {\r\n            this.postsService.addPost(this.form.value.title, this.form.value.content, this.form.value.image);\r\n        }\r\n        else {\r\n            this.postsService.updatePost(this.postId, this.form.value.title, this.form.value.content, this.form.value.imagePath);\r\n        }\r\n        this.form.reset();\r\n    }\r\n}\r\nPostCreateComponent.ɵfac = function PostCreateComponent_Factory(t) { return new (t || PostCreateComponent)(i0.ɵɵdirectiveInject(i1.PostsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute)); };\r\nPostCreateComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PostCreateComponent, selectors: [[\"app-post-create\"]], decls: 3, vars: 2, consts: [[4, \"ngIf\"], [3, \"formGroup\", \"submit\", 4, \"ngIf\"], [3, \"formGroup\", \"submit\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"title\", \"placeholder\", \"Device Id\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"isActive\", \"placeholder\", \"IsActive\"], [\"matInput\", \"\", \"rows\", \"4\", \"formControlName\", \"content\", \"placeholder\", \"Content\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", \"type\", \"submit\"]], template: function PostCreateComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"mat-card\");\r\n        i0.ɵɵtemplate(1, PostCreateComponent_mat_spinner_1_Template, 1, 0, \"mat-spinner\", 0);\r\n        i0.ɵɵtemplate(2, PostCreateComponent_form_2_Template, 16, 4, \"form\", 1);\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\r\n    } }, directives: [i3.MatCard, i4.NgIf, i5.MatProgressSpinner, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i7.MatFormField, i8.MatInput, i6.DefaultValueAccessor, i6.NgControlStatus, i6.FormControlName, i7.MatError, i9.MatButton], styles: [\"mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\nmat-spinner[_ngcontent-%COMP%] {\\r\\n    margin: auto;\\r\\n}\\r\\n\\r\\ninput[type=\\\"file\\\"][_ngcontent-%COMP%] {\\r\\n    visibility: hidden;\\r\\n}\\r\\n\\r\\n.image-preview[_ngcontent-%COMP%] {\\r\\n    height: 5rem;\\r\\n    margin: 1rem 0;\\r\\n}\\r\\n\\r\\n.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n    height: 170%;\\r\\n    width: 15%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QtY3JlYXRlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGNBQWM7QUFDbEI7O0FBRUE7SUFDSSxZQUFZO0lBQ1osVUFBVTtBQUNkIiwiZmlsZSI6InBvc3QtY3JlYXRlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJtYXQtZm9ybS1maWVsZCwgdGV4dGFyZWEge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbm1hdC1zcGlubmVyIHtcclxuICAgIG1hcmdpbjogYXV0bztcclxufVxyXG5cclxuaW5wdXRbdHlwZT1cImZpbGVcIl0ge1xyXG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG59XHJcblxyXG4uaW1hZ2UtcHJldmlldyB7XHJcbiAgICBoZWlnaHQ6IDVyZW07XHJcbiAgICBtYXJnaW46IDFyZW0gMDtcclxufVxyXG5cclxuLmltYWdlLXByZXZpZXcgaW1nIHtcclxuICAgIGhlaWdodDogMTcwJTtcclxuICAgIHdpZHRoOiAxNSU7XHJcbn0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}